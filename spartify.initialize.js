function a0_0x2dd9(){const _0x3f036b=['Error\x20during\x20installation:','log','token','parse','stringify','--runTest','291592izRHeo','path','Your\x20token\x20may\x20have\x20expired\x20or\x20be\x20incorrect.\x20Kindly\x20reach\x20out\x20to\x20Spartify\x20support\x20for\x20assistance.:\x20','357764abuIKH','1053uclgmF','filter','695838YxUaga','--initialize','cwd','HTTP\x20error!\x20Status:\x20','message','existsSync','includes','startsWith','slice','env','1238174EGCqNv','--openTest','Error\x20loading\x20.env\x20file:','2568980hoOpQQ','SARTIFY_KEY','Empty\x20token\x20received','package.json\x20file\x20not\x20found','join','forEach','No\x20.env\x20file\x20found.\x20Using\x20CI/CD\x20environment\x20variables.','trim','readFileSync','error','package.json','npm\x20install\x20--registry=https://registry.npmjs.org/\x20--//registry.npmjs.org/:_authToken=','113832THCWpa','utf8','inherit','npx\x20cypress\x20open\x20--config-file\x20spartify.config.ts\x20','API\x20key\x20is\x20missing\x20in\x20environment\x20variables','application/json','.env','argv','unlinkSync','split','1374702sHvUdr','POST','package-lock.json','6ZeHpnk'];a0_0x2dd9=function(){return _0x3f036b;};return a0_0x2dd9();}const a0_0x2df9d1=a0_0x5dbb;(function(_0x25e4c1,_0x326a97){const _0x854b3d=a0_0x5dbb,_0x3c06de=_0x25e4c1();while(!![]){try{const _0x52675b=-parseInt(_0x854b3d(0x215))/0x1+parseInt(_0x854b3d(0x1e8))/0x2+-parseInt(_0x854b3d(0x20b))/0x3+-parseInt(_0x854b3d(0x1e5))/0x4+parseInt(_0x854b3d(0x1f5))/0x5*(-parseInt(_0x854b3d(0x20e))/0x6)+-parseInt(_0x854b3d(0x1f2))/0x7+-parseInt(_0x854b3d(0x201))/0x8*(-parseInt(_0x854b3d(0x1e6))/0x9);if(_0x52675b===_0x326a97)break;else _0x3c06de['push'](_0x3c06de['shift']());}catch(_0x34cd16){_0x3c06de['push'](_0x3c06de['shift']());}}}(a0_0x2dd9,0x75dcf));const {execSync}=require('child_process'),fs=require('fs'),path=require(a0_0x2df9d1(0x216));loadEnv();const args=process[a0_0x2df9d1(0x208)][a0_0x2df9d1(0x1f0)](0x2);function getFrameworkVersion(){const _0x235648=a0_0x2df9d1,_0x2ea2e4=path[_0x235648(0x1f9)](__dirname,_0x235648(0x1ff));if(!fs[_0x235648(0x1ed)](_0x2ea2e4))throw new Error(_0x235648(0x1f8));const _0x4862f0=JSON[_0x235648(0x212)](fs[_0x235648(0x1fd)](_0x2ea2e4,_0x235648(0x202))),_0x4fff07=_0x4862f0['devDependencies']?.['@spartify.io/spartify-engine'];if(!_0x4fff07)throw new Error('@spartify.io/spartify-engine\x20version\x20not\x20found\x20in\x20package.json');return _0x4fff07;}function a0_0x5dbb(_0x2f9116,_0x4b2acd){const _0x2dd9e0=a0_0x2dd9();return a0_0x5dbb=function(_0x5dbb21,_0x148e5f){_0x5dbb21=_0x5dbb21-0x1e4;let _0x562b6a=_0x2dd9e0[_0x5dbb21];return _0x562b6a;},a0_0x5dbb(_0x2f9116,_0x4b2acd);}async function getToken(_0x315fc0,_0x10de6b){const _0x106ddc=a0_0x2df9d1;try{const _0xfbb2f1=await fetch('https://dev-portal.spartify.io/spartify-cli-token/generation',{'method':_0x106ddc(0x20c),'headers':{'Content-Type':_0x106ddc(0x206)},'body':JSON[_0x106ddc(0x213)]({'apiKey':_0x315fc0,'frameworkVersion':_0x10de6b})});if(!_0xfbb2f1['ok'])throw new Error(_0x106ddc(0x1eb)+_0xfbb2f1['status']);const _0x56cc4c=await _0xfbb2f1['text']();if(!_0x56cc4c)throw new Error(_0x106ddc(0x1f7));return _0x56cc4c;}catch(_0x29c4d8){throw new Error(_0x106ddc(0x1e4)+_0x29c4d8['message']);}}async function getConfig(){const _0x524dc6=a0_0x2df9d1,_0x79822b=process['env'][_0x524dc6(0x1f6)];if(!_0x79822b)throw new Error(_0x524dc6(0x205));const _0x48ca45=getFrameworkVersion(),_0x377c72=await getToken(_0x79822b,_0x48ca45);return{'apiKey':_0x79822b,'token':_0x377c72};}function deletePackageLock(){const _0x192981=a0_0x2df9d1,_0x1e54cf=path[_0x192981(0x1f9)](process[_0x192981(0x1ea)](),_0x192981(0x20d));if(fs[_0x192981(0x1ed)](_0x1e54cf))try{fs[_0x192981(0x209)](_0x1e54cf);}catch(_0x403648){process['exit'](0x1);}}async function runI(){const _0x331fec=a0_0x2df9d1;try{deletePackageLock();const _0x36e1e3=await getConfig(),_0x55d57d=args[_0x331fec(0x1e7)](_0x5bce16=>_0x5bce16!==_0x331fec(0x1e9))['join']('\x20');execSync(_0x331fec(0x200)+_0x36e1e3[_0x331fec(0x211)]+'\x20'+_0x55d57d,{'stdio':_0x331fec(0x203)});}catch(_0x402efe){console[_0x331fec(0x1fe)](_0x331fec(0x20f),_0x402efe[_0x331fec(0x1ec)]),process['exit'](0x1);}}async function runTest(){const _0x2d3a55=a0_0x2df9d1;try{const _0x3e5121=args['filter'](_0x19fb96=>_0x19fb96!==_0x2d3a55(0x214))['join']('\x20');execSync('npx\x20cypress\x20run\x20--config-file\x20spartify.config.ts\x20'+_0x3e5121,{'stdio':_0x2d3a55(0x203)});}catch(_0x555344){console[_0x2d3a55(0x1fe)](_0x555344['message']);}}async function openTest(){const _0x304ae6=a0_0x2df9d1;try{const _0x259db3=args[_0x304ae6(0x1e7)](_0x14bdef=>_0x14bdef!==_0x304ae6(0x1f3))[_0x304ae6(0x1f9)]('\x20');execSync(_0x304ae6(0x204)+_0x259db3,{'stdio':_0x304ae6(0x203)});}catch(_0xf9dc97){console[_0x304ae6(0x1fe)](_0xf9dc97[_0x304ae6(0x1ec)]);}}function loadEnv(_0x544725=a0_0x2df9d1(0x207)){const _0x4be3e1=a0_0x2df9d1;try{const _0x497dbd=path['resolve'](_0x544725);if(fs['existsSync'](_0x497dbd)){const _0xc7b36b=fs[_0x4be3e1(0x1fd)](_0x497dbd,_0x4be3e1(0x202)),_0x2f21f0=_0xc7b36b[_0x4be3e1(0x20a)]('\x0a');_0x2f21f0[_0x4be3e1(0x1fa)](_0x489b88=>{const _0x4d5c17=_0x4be3e1;if(_0x489b88[_0x4d5c17(0x1fc)]()&&!_0x489b88[_0x4d5c17(0x1ef)]('#')){const [_0xf5f9af,_0x302108]=_0x489b88[_0x4d5c17(0x20a)]('=')['map'](_0x2127a2=>_0x2127a2[_0x4d5c17(0x1fc)]());_0xf5f9af&&_0x302108&&!process[_0x4d5c17(0x1f1)][_0xf5f9af]&&(process[_0x4d5c17(0x1f1)][_0xf5f9af]=_0x302108);}});}else console[_0x4be3e1(0x210)](_0x4be3e1(0x1fb));}catch(_0x11d6f7){console[_0x4be3e1(0x1fe)](_0x4be3e1(0x1f4),_0x11d6f7[_0x4be3e1(0x1ec)]);}}if(args[a0_0x2df9d1(0x1ee)]('--initialize'))runI();else{if(args[a0_0x2df9d1(0x1ee)](a0_0x2df9d1(0x214)))runTest();else args[a0_0x2df9d1(0x1ee)](a0_0x2df9d1(0x1f3))&&openTest();}